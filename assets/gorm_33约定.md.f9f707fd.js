import{_ as s,c as n,o as a,a as l}from"./app.78cd51cb.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":3,"title":"1.\u4F7F\u7528 ID \u4F5C\u4E3A\u4E3B\u952E","slug":"_1-\u4F7F\u7528-id-\u4F5C\u4E3A\u4E3B\u952E","link":"#_1-\u4F7F\u7528-id-\u4F5C\u4E3A\u4E3B\u952E","children":[]},{"level":3,"title":"2.\u590D\u6570\u8868\u540D","slug":"_2-\u590D\u6570\u8868\u540D","link":"#_2-\u590D\u6570\u8868\u540D","children":[]},{"level":3,"title":"3.\u4E34\u65F6\u6307\u5B9A\u8868\u540D","slug":"_3-\u4E34\u65F6\u6307\u5B9A\u8868\u540D","link":"#_3-\u4E34\u65F6\u6307\u5B9A\u8868\u540D","children":[]},{"level":3,"title":"4.\u5217\u540D","slug":"_4-\u5217\u540D","link":"#_4-\u5217\u540D","children":[]},{"level":3,"title":"\u65F6\u95F4\u6233\u8FFD\u8E2A","slug":"\u65F6\u95F4\u6233\u8FFD\u8E2A","link":"#\u65F6\u95F4\u6233\u8FFD\u8E2A","children":[]},{"level":3,"title":"1.CreatedAt","slug":"_1-createdat","link":"#_1-createdat","children":[]},{"level":3,"title":"2.UpdateAt","slug":"_2-updateat","link":"#_2-updateat","children":[]}],"relativePath":"gorm/33\u7EA6\u5B9A.md"}'),p={name:"gorm/33\u7EA6\u5B9A.md"},e=l(`<h3 id="_1-\u4F7F\u7528-id-\u4F5C\u4E3A\u4E3B\u952E" tabindex="-1">1.\u4F7F\u7528 ID \u4F5C\u4E3A\u4E3B\u952E <a class="header-anchor" href="#_1-\u4F7F\u7528-id-\u4F5C\u4E3A\u4E3B\u952E" aria-hidden="true">#</a></h3><ul><li>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C <code>GORM</code>\u4F1A\u4F7F\u7528 ID \u4F5C\u4E3A\u4E3B\u952E</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  ID   </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u540D\u4E3A \`ID\` \u7684\u5B57\u6BB5\u4F1A\u4F5C\u4E3A\u8868\u7684\u4E3B\u952E</span></span>
<span class="line"><span style="color:#A6ACCD;">  Name </span><span style="color:#C792EA;">string</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>\u4F60\u53EF\u4EE5\u901A\u8FC7\u6807\u7B7E<code>primaryKey</code>\u5C06\u5176\u4ED6\u5B57\u6BB5\u8BBE\u7F6E\u4E3A\u4E3B\u952E</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// \u5C06 \`UUID\` \u8BBE\u4E3A\u4E3B\u952E</span></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  ID     </span><span style="color:#C792EA;">int64</span></span>
<span class="line"><span style="color:#A6ACCD;">  UUID   </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;primaryKey&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  Name   </span><span style="color:#C792EA;">string</span></span>
<span class="line"><span style="color:#A6ACCD;">  Age    </span><span style="color:#C792EA;">int64</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-\u590D\u6570\u8868\u540D" tabindex="-1">2.\u590D\u6570\u8868\u540D <a class="header-anchor" href="#_2-\u590D\u6570\u8868\u540D" aria-hidden="true">#</a></h3><ul><li><p>GORM \u4F7F\u7528\u7ED3\u6784\u4F53\u540D\u7684 \u86C7\u5F62\u547D\u540D \u4F5C\u4E3A\u8868\u540D\u3002\u5BF9\u4E8E\u7ED3\u6784\u4F53 User\uFF0C\u6839\u636E\u7EA6\u5B9A\uFF0C\u5176\u8868\u540D\u4E3A users</p></li><li><p><code>TableName</code></p></li><li><p>\u4F60\u53EF\u4EE5\u5B9E\u73B0 Tabler \u63A5\u53E3\u6765\u66F4\u6539\u9ED8\u8BA4\u8868\u540D\uFF0C\u4F8B\u5982</p></li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Tabler</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">interface{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">TableName</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5B9E\u73B0\u8FD9\u4E2A\u65B9\u6CD5\u5373\u53EF</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// TableName\u4F1A\u5C06User\u7684\u8868\u91CD\u5199\u4E3A\`profiles\`</span></span>
<span class="line"><span style="color:#89DDFF;">func(</span><span style="color:#A6ACCD;">User</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TableName</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">profiles</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>-\u6CE8\u610F\uFF1A TableName \u4E0D\u652F\u6301\u52A8\u6001\u53D8\u5316\uFF0C\u5B83\u4F1A\u88AB\u7F13\u5B58\u4E0B\u6765\u4EE5\u4FBF\u540E\u7EED\u4F7F\u7528\u3002\u60F3\u8981\u4F7F\u7528\u52A8\u6001\u8868\u540D\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 Scopes\uFF0C\u4F8B\u5982</p><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserTable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user User</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">tx </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">gorm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">gorm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">tx </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">gorm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">gorm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DB </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u5982\u679Cuser.Admin\u4E3Atrue,\u5219\u64CD\u4F5C\u7684\u8868\u540D\u4E3Aadmin_users</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Admin </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> tx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Table</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin_users</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u5426\u5219\u64CD\u4F5C\u7684\u8868\u540D\u4E3Ausers</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> tx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Table</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">users</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">//</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Scopes</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">UserTable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)).</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-\u4E34\u65F6\u6307\u5B9A\u8868\u540D" tabindex="-1">3.\u4E34\u65F6\u6307\u5B9A\u8868\u540D <a class="header-anchor" href="#_3-\u4E34\u65F6\u6307\u5B9A\u8868\u540D" aria-hidden="true">#</a></h3><ul><li>\u4F60\u53EF\u4EE5\u4F7F\u7528 Table \u65B9\u6CD5\u6307\u5B9A\u4E34\u65F6\u8868\u540D</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#676E95;">// \u6839\u636EUser\u7684\u5B57\u6BB5\u521B\u5EFA\`deleted_users\`\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Table</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deleted_users</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">AutoMigrate</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">User</span><span style="color:#89DDFF;">{})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u4ECE\u53E6\u4E00\u5F20\u8868\u67E5\u8BE2\u6570\u636E</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> deletedUsers </span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;">User</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Table</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deleted_users</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Find</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">deletedUsers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;">// SELECT * FROM deleted_users;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Table</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deleted_users</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Where</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name = ?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Delete</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">User</span><span style="color:#89DDFF;">{})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_4-\u5217\u540D" tabindex="-1">4.\u5217\u540D <a class="header-anchor" href="#_4-\u5217\u540D" aria-hidden="true">#</a></h3><ul><li>\u6839\u636E\u7EA6\u5B9A\uFF0C\u6570\u636E\u8868\u7684\u5217\u540D\u4F7F\u7528\u7684\u662F struct \u5B57\u6BB5\u540D\u7684\u86C7\u5F62\u547D\u540D</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  ID        </span><span style="color:#C792EA;">uint</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">// \u5217\u540D\u662F \`id\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  Name      </span><span style="color:#C792EA;">string</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">// \u5217\u540D\u662F \`name\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  Birthday  time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time </span><span style="color:#676E95;">// \u5217\u540D\u662F \`birthday\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  CreatedAt time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time </span><span style="color:#676E95;">// \u5217\u540D\u662F \`created_at\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>\u4F60\u53EF\u4EE5\u4F7F\u7528<code>column</code>\u6807\u7B7E\u6216<code>\u547D\u540D\u7B56\u7565</code>\u6765\u8986\u76D6\u5217\u540D</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Animal</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  AnimalID </span><span style="color:#C792EA;">int64</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;column:beast_id&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">         </span><span style="color:#676E95;">// \u5C06\u5217\u540D\u8BBE\u4E3A \`beast_id\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  Birthday time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;column:day_of_the_beast&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5C06\u5217\u540D\u8BBE\u4E3A \`day_of_the_beast\`</span></span>
<span class="line"><span style="color:#A6ACCD;">  Age      </span><span style="color:#C792EA;">int64</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;column:age_of_the_beast&quot;</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5C06\u5217\u540D\u8BBE\u4E3A \`age_of_the_beast\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u65F6\u95F4\u6233\u8FFD\u8E2A" tabindex="-1">\u65F6\u95F4\u6233\u8FFD\u8E2A <a class="header-anchor" href="#\u65F6\u95F4\u6233\u8FFD\u8E2A" aria-hidden="true">#</a></h3><h3 id="_1-createdat" tabindex="-1">1.<code>CreatedAt</code> <a class="header-anchor" href="#_1-createdat" aria-hidden="true">#</a></h3><ul><li>\u5BF9\u4E8E\u6709 CreatedAt \u5B57\u6BB5\u7684\u6A21\u578B\uFF0C\u521B\u5EFA\u8BB0\u5F55\u65F6\uFF0C\u5982\u679C\u8BE5\u5B57\u6BB5\u503C\u4E3A\u96F6\u503C\uFF0C\u5219\u5C06\u8BE5\u5B57\u6BB5\u7684\u503C\u8BBE\u7F6E\u4E3A\u5F53\u524D\u65F6\u95F4</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5C06\`CreatedAt\`\u8BBE\u7F6E\u4E3A\u5F53\u524D\u65F6\u95F4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">user2 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> CreatedAt</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Now</span><span style="color:#89DDFF;">()}</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user2</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// user2\u7684\`CreatedAt\`\u4E0D\u4F1A\u88AB\u4FEE\u6539</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u60F3\u8981\u4FEE\u6539\u503C\uFF0C\u53EF\u4EE5\u4F7F\u7528\`Update\`</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Model</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Update</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CreatedAt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Now</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>\u4F60\u53EF\u4EE5\u901A\u8FC7\u5C06<code>autoCreateTime</code>\u6807\u7B7E\u90E8\u7F72\u4E3A<code>false</code>\u6765\u7981\u7528\u65F6\u95F4\u6233\u8FFD\u8E2A</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct{</span></span>
<span class="line"><span style="color:#A6ACCD;">  CreatedAt time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;autoCreateTime:fakse&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-updateat" tabindex="-1">2.<code>UpdateAt</code> <a class="header-anchor" href="#_2-updateat" aria-hidden="true">#</a></h3><ul><li>\u5BF9\u4E8E\u6709<code>UpdateAt</code>\u5B57\u6BB5\u7684\u6A21\u578B\uFF0C\u66F4\u65B0\u8BB0\u5F55\u65F6\uFF0C\u5C06\u8BE5\u5B57\u6BB5\u7684\u503C\u8BBE\u4E3A\u5F53\u524D\u65F6\u95F4.</li><li>\u521B\u5EFA\u8BB0\u5F55\u65F6\uFF0C\u5982\u679C\u8BE5\u5B57\u6BB5\u503C\u4E3A\u96F6\u503C\uFF0C\u5219\u5C06\u8BE5\u5B57\u6BB5\u8BBE\u7F6E\u4E3A\u5F53\u524D\u65F6\u95F4</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Save</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u5C06\`UpdatedAt\`\u8BBE\u4E3A\u5F53\u524D\u65F6\u95F4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Model</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">Update</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u4F1A\u5C06\`UpdateAt\`\u8BBE\u7F6E\u4E3A\u5F53\u524D\u65F6\u95F4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Model</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">UpdateColumn</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \`UpdatedAt\` \u4E0D\u4F1A\u88AB\u4FEE\u6539</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">user2 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> UpdatedAt</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Now</span><span style="color:#89DDFF;">()}</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Create</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user2</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u521B\u5EFA\u8BB0\u5F55\u65F6\uFF0Cuser2 \u7684 \`UpdatedAt\` \u4E0D\u4F1A\u88AB\u4FEE\u6539</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">user3 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jinzhu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> UpdatedAt</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Now</span><span style="color:#89DDFF;">()}</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Save</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#A6ACCD;">user3</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// \u66F4\u65B0\u65F6\uFF0Cuser3 \u7684 \`UpdatedAt\` \u4F1A\u4FEE\u6539\u4E3A\u5F53\u524D\u65F6\u95F4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>\u4F60\u53EF\u4EE5\u901A\u8FC7\u5C06<code>autoUpdateTime</code>\u6807\u7B7E\u8BBE\u7F6E\u4E3A<code>false</code>\u6765\u7981\u7528\u65F6\u95F4\u6233\u8FFD\u8E2A</li></ul><div class="language-go line-numbers-mode"><button class="copy"></button><span class="lang">go</span><pre><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">struct{</span></span>
<span class="line"><span style="color:#A6ACCD;">  UpdatedAt time</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Time </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">gorm:&quot;autoUpdatedTime:false&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,29),o=[e];function r(c,t,D,F,y,A){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{C as __pageData,u as default};
